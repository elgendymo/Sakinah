
> sakinah-app@1.0.0 build
> turbo run build

• Packages in scope: @sakinah/api, @sakinah/types, @sakinah/ui, @sakinah/web
• Running build in 4 packages
• Remote caching disabled
@sakinah/api:build: cache miss, executing 001207d08cb8f656
@sakinah/ui:build: cache miss, executing 577fd4c24e6e64fc
@sakinah/web:build: cache miss, executing 7b756436a7e76144
@sakinah/types:build: cache miss, executing a62bf2e4cf688997
@sakinah/types:build: 
@sakinah/types:build: > @sakinah/types@1.0.0 build
@sakinah/types:build: > tsc
@sakinah/types:build: 
@sakinah/api:build: 
@sakinah/api:build: > @sakinah/api@1.0.0 build
@sakinah/api:build: > tsc
@sakinah/api:build: 
@sakinah/ui:build: 
@sakinah/ui:build: > @sakinah/ui@1.0.0 build
@sakinah/ui:build: > tsc --noEmit
@sakinah/ui:build: 
@sakinah/web:build: 
@sakinah/web:build: > @sakinah/web@1.0.0 build
@sakinah/web:build: > next build
@sakinah/web:build: 
@sakinah/web:build:  ⚠ Warning: Found multiple lockfiles. Selecting /Users/moel-gendy/pnpm-lock.yaml.
@sakinah/web:build:    Consider removing the lockfiles at:
@sakinah/web:build:    * /Users/moel-gendy/IdeaProjects/Sakinah/package-lock.json
@sakinah/web:build: 
@sakinah/web:build:    ▲ Next.js 15.4.7
@sakinah/web:build:    - Environments: .env.local
@sakinah/web:build:    - Experiments (use with caution):
@sakinah/web:build:      · serverActions
@sakinah/web:build: 
@sakinah/web:build:    Creating an optimized production build ...
@sakinah/api:build: src/application/usecases/GetPrayerTimesUseCase.ts(86,23): error TS2350: Only a void function can be called with the 'new' keyword.
@sakinah/api:build: src/application/usecases/GetPrayerTimesUseCase.ts(98,23): error TS2350: Only a void function can be called with the 'new' keyword.
@sakinah/api:build: src/application/usecases/GetPrayerTimesUseCase.ts(131,21): error TS2350: Only a void function can be called with the 'new' keyword.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(3,14): error TS2654: Non-abstract class 'DhikrSessionCreatedEvent' is missing implementations for the following members of 'DomainEvent': 'eventVersion', 'getPayload'.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(12,5): error TS2554: Expected 1 arguments, but got 0.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(20,14): error TS2654: Non-abstract class 'DhikrCountIncrementedEvent' is missing implementations for the following members of 'DomainEvent': 'eventVersion', 'getPayload'.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(29,5): error TS2554: Expected 1 arguments, but got 0.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(37,14): error TS2654: Non-abstract class 'DhikrSessionCompletedEvent' is missing implementations for the following members of 'DomainEvent': 'eventVersion', 'getPayload'.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(46,5): error TS2554: Expected 1 arguments, but got 0.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(54,14): error TS2654: Non-abstract class 'DhikrTargetReachedEvent' is missing implementations for the following members of 'DomainEvent': 'eventVersion', 'getPayload'.
@sakinah/api:build: src/domain/events/DhikrEvents.ts(62,5): error TS2554: Expected 1 arguments, but got 0.
@sakinah/api:build: src/infrastructure/database/base.ts(245,12): error TS2416: Property 'getJournalsByUserId' in type 'BaseDatabaseClient' is not assignable to the same property in base type 'IDatabaseClient'.
@sakinah/api:build:   Type '(userId: string, filters?: { search?: string; tags?: string[]; page?: number; limit?: number; sortBy?: "createdAt" | "content"; sortOrder?: "asc" | "desc"; }) => Promise<DatabaseResult<{ entries: { id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]; pagination: any; }>>' is not assignable to type '(userId: string, search?: string) => Promise<DatabaseResult<{ id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]>>'.
@sakinah/api:build:     Types of parameters 'filters' and 'search' are incompatible.
@sakinah/api:build:       Type 'string' is not assignable to type '{ search?: string; tags?: string[]; page?: number; limit?: number; sortBy?: "createdAt" | "content"; sortOrder?: "asc" | "desc"; }'.
@sakinah/api:build: src/infrastructure/database/factory.ts(25,7): error TS2740: Type 'DevelopmentDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 22 more.
@sakinah/api:build: src/infrastructure/database/factory.ts(33,7): error TS2740: Type 'ProductionDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 39 more.
@sakinah/api:build: src/infrastructure/database/factory.ts(38,7): error TS2740: Type 'ProductionDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 39 more.
@sakinah/api:build: src/infrastructure/database/factory.ts(44,7): error TS2740: Type 'DevelopmentDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 22 more.
@sakinah/api:build: src/infrastructure/database/factory.ts(51,7): error TS2740: Type 'ProductionDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 39 more.
@sakinah/api:build: src/infrastructure/database/factory.ts(55,5): error TS2740: Type 'DevelopmentDatabaseClient' is missing the following properties from type 'IDatabaseClient': createIntention, getIntentionsByUserId, getIntentionById, updateIntention, and 22 more.
@sakinah/api:build: src/infrastructure/database/supabase/production.ts(583,9): error TS2416: Property 'getJournalsByUserId' in type 'ProductionDatabaseClient' is not assignable to the same property in base type 'BaseDatabaseClient'.
@sakinah/api:build:   Type '(userId: string, search?: string) => Promise<DatabaseResult<{ id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]>>' is not assignable to type '(userId: string, filters?: { search?: string; tags?: string[]; page?: number; limit?: number; sortBy?: "createdAt" | "content"; sortOrder?: "asc" | "desc"; }) => Promise<DatabaseResult<{ entries: { id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]; pagination: any; }>>'.
@sakinah/api:build:     Types of parameters 'search' and 'filters' are incompatible.
@sakinah/api:build:       Type '{ search?: string; tags?: string[]; page?: number; limit?: number; sortBy?: "createdAt" | "content"; sortOrder?: "asc" | "desc"; }' is not assignable to type 'string'.
@sakinah/api:build: src/infrastructure/di/container.ts(76,5): error TS2769: No overload matches this call.
@sakinah/api:build:   The last overload gave the following error.
@sakinah/api:build:     Object literal may only specify known properties, and 'useFactory' does not exist in type 'constructor<ICacheService>'.
@sakinah/api:build: src/infrastructure/repos/JournalRepository.ts(32,62): error TS2345: Argument of type '{ search?: string; tags?: string[]; page?: number; limit?: number; sortBy?: "createdAt" | "content"; sortOrder?: "asc" | "desc"; }' is not assignable to parameter of type 'string'.
@sakinah/api:build: src/infrastructure/repos/JournalRepository.ts(38,5): error TS2741: Property 'pagination' is missing in type '{ id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]' but required in type '{ entries: { id: string; createdAt: string; userId: string; content: string; tags?: string[]; }[]; pagination: any; }'.
@sakinah/api:build: src/infrastructure/repos/JournalRepositoryAdapter.ts(75,52): error TS2339: Property 'map' does not exist on type 'undefined[] | (() => ArrayIterator<[number, { id: string; createdAt: string; userId: string; content: string; tags?: string[]; }]>)'.
@sakinah/api:build:   Property 'map' does not exist on type '() => ArrayIterator<[number, { id: string; createdAt: string; userId: string; content: string; tags?: string[]; }]>'.
@sakinah/api:build: src/infrastructure/resilience/example.ts(92,22): error TS2339: Property 'databaseResilient' does not exist on type 'typeof ResilienceFactory'.
@sakinah/api:build: src/infrastructure/resilience/example.ts(101,22): error TS2339: Property 'externalApiResilient' does not exist on type 'typeof ResilienceFactory'.
@sakinah/api:build: src/infrastructure/resilience/example.ts(107,22): error TS2339: Property 'aiResilient' does not exist on type 'typeof ResilienceFactory'.
@sakinah/api:build: src/infrastructure/resilience/RateLimiter.ts(148,11): error TS2322: Type 'Response<any, Record<string, any>>' is not assignable to type 'void'.
@sakinah/api:build: src/routes/v2/habits-cqrs.ts(22,10): error TS2305: Module '"@/infrastructure/database/base"' has no exported member 'getDb'.
@sakinah/api:build: src/routes/v2/habits-cqrs.ts(508,46): error TS7030: Not all code paths return a value.
@sakinah/api:build: npm error Lifecycle script `build` failed with error:
@sakinah/api:build: npm error code 2
@sakinah/api:build: npm error path /Users/moel-gendy/IdeaProjects/Sakinah/apps/api
@sakinah/api:build: npm error workspace @sakinah/api@1.0.0
@sakinah/api:build: npm error location /Users/moel-gendy/IdeaProjects/Sakinah/apps/api
@sakinah/api:build: npm error command failed
@sakinah/api:build: npm error command sh -c tsc
@sakinah/api:build: ERROR: command finished with error: command (/Users/moel-gendy/IdeaProjects/Sakinah/apps/api) /Users/moel-gendy/.nvm/versions/node/v24.8.0/bin/npm run build exited (2)
@sakinah/web:build: npm error Lifecycle script `build` failed with error:
@sakinah/web:build: npm error code 130
@sakinah/web:build: npm error path /Users/moel-gendy/IdeaProjects/Sakinah/apps/ui
@sakinah/web:build: npm error workspace @sakinah/web@1.0.0
@sakinah/web:build: npm error location /Users/moel-gendy/IdeaProjects/Sakinah/apps/ui
@sakinah/web:build: npm error command failed
@sakinah/web:build: npm error command sh -c next build
@sakinah/api#build: command (/Users/moel-gendy/IdeaProjects/Sakinah/apps/api) /Users/moel-gendy/.nvm/versions/node/v24.8.0/bin/npm run build exited (2)

 Tasks:    2 successful, 4 total
Cached:    0 cached, 4 total
  Time:    6.061s 
Failed:    @sakinah/api#build

 ERROR  run failed: command  exited (2)
